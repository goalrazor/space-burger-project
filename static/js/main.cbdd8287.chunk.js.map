{"version":3,"sources":["components/modal-overlay/ModalOverlay.module.css","pages/not-found-page/notFoundPage.module.css","api/Api.js","services/actions/burger-ingredients.js","services/actions/burger-constructor-ingredients.js","services/reducers/burger-constructor-ingredients.js","utils/propTypesTemplates.js","components/card/Card.jsx","components/ingredients/Ingredients.jsx","services/reducers/burger-ingredients.js","utils/cookie.js","services/actions/auth.js","services/reducers/auth.js","services/reducers/index.js","components/burger-ingredients/BurgerIngredients.jsx","components/constructor-list-element/constructorListElement.jsx","components/total/Total.jsx","components/burger-constructor/BurgerConstructor.jsx","components/modal-overlay/ModalOverlay.jsx","components/modal/Modal.jsx","images/done.svg","components/order-details/OrderDetails.jsx","pages/send-order-modal-page/sendOrderModalPage.jsx","pages/constructor-page/constructorPage.jsx","components/form/Form.jsx","services/hooks/useForm.js","pages/login-page/loginPage.jsx","pages/registration-page/registrationPage.jsx","pages/forgot-password-page/forgotPasswordPage.jsx","pages/reset-password-page/resetPasswordPage.jsx","pages/profile-page/profilePage.jsx","pages/not-found-page/notFoundPage.jsx","components/header-menu-item/HeaderMenuItem.jsx","components/app-header/AppHeader.jsx","components/protected-route.jsx","components/ingredient-details/IngredientDetails.jsx","pages/ingredient-modal-page/ingredientModalPage.jsx","components/app/App.jsx","index.jsx","components/app-header/AppHeader.module.css","pages/profile-page/profilePage.module.css","components/burger-constructor/BurgerConstructor.module.css","components/ingredient-details/IngredientDetails.module.css","pages/constructor-page/constructorPage.module.css","components/burger-ingredients/BurgerIngredients.module.css","components/card/Card.module.css","components/order-details/OrderDetails.module.css","components/modal/Modal.module.css","components/form/form.module.css"],"names":["module","exports","api","baseUrl","headers","this","_url","_headers","fetch","then","_checkResponse","body","method","JSON","stringify","email","password","token","name","refreshToken","authorization","profileInfo","res","status","json","message","TOTAL_PRICE","RESET_TOTAL_PRICE","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","ADD_INGREDIENT","DELETE_INGREDIENT","MOVE_INGREDIENT","INCREASE_INGREDIENT_COUNT","DECREASE_INGREDIENT_COUNT","SET_CURRENT_INGREDIENT","SET_INGREDIENT_MODAL_SHOW","SET_INGREDIENT_MODAL_CLOSED","CLOSE_INGREDIENT_MODAL","DELETE_ALL_INGREDIENTS","RESET_INGREDIENT_COUNT","SET_CURRENT_TAB","setIngredientsRequestFailed","type","setCurrentTab","currentTab","dispatch","SET_ORDER_DETAILS","CLOSE_ORDER_MODAL","SET_ORDER_REQUEST","SET_ORDER_REQUEST_FAILED","setOrderRequestFailed","setOrder","saveOrder","success","details","catch","err","console","error","initialState","orderDetails","orderModalShown","orderRequest","orderRequestFailed","PropTypes","shape","_id","string","isRequired","proteins","number","fat","carbohydrates","calories","price","image","image_mobile","image_large","__v","order","object","bool","Card","props","useDispatch","itemCount","useSelector","store","ingredientReducer","ingredients","filter","item","ingredientCount","location","useLocation","useDrag","dragRef","className","style","link","to","pathname","state","background","dragIco","onClick","ref","count","size","src","alt","BUN","SAUCE","MAIN","switchDataString","key","dataString","filterBurgerData","data","getPartOfBurgerData","children","concat","Ingredients","id","cardsContainer","map","constructorIngredients","ingredientsRequest","ingredientsFailed","ingredientModalShow","currentIngredient","totalPrice","setCookie","value","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","REGISTER_REQUEST_IN_PROGRESS","REGISTER_REQUEST_FAILED","REGISTER_REQUEST_SUCCESS","LOGIN_REQUEST_IN_PROGRESS","LOGIN_REQUEST_FAILED","LOGIN_REQUEST_SUCCESS","LOGOUT_REQUEST_IN_PROGRESS","LOGOUT_REQUEST_FAILED","LOGOUT_REQUEST_SUCCESS","REFRESH_TOKEN_REQUEST_IN_PROGRESS","REFRESH_TOKEN_REQUEST_FAILED","REFRESH_TOKEN_REQUEST_SUCCESS","GET_PROFILE_INFO_IN_PROGRESS","GET_PROFILE_INFO_FAILED","GET_PROFILE_INFO_SUCCESS","SET_PROFILE_INFO_IN_PROGRESS","SET_PROFILE_INFO_FAILED","SET_PROFILE_INFO_SUCCESS","RESET_PASSWORD_IN_PROGRESS","RESET_PASSWORD_FAILED","RESET_PASSWORD_SUCCESS","SET_NEW_PASSWORD_IN_PROGRESS","SET_NEW_PASSWORD_FAILED","SET_NEW_PASSWORD_SUCCESS","register","checkSuccess","user","accessToken","split","login","logout","localStorage","setItem","getProfileInfo","setProfileInfo","resetPassword","setNewPassword","registerRequestInProgress","registerRequestFailed","loginRequestInProgress","loginRequestFailed","logoutRequestInProgress","logoutRequestFailed","isLoggedIn","tokenRefreshRequestInProgress","tokenRefreshRequestFailed","getProfileInfoInProgress","getProfileInfoFailed","setProfileInfoInProgress","setProfileInfoFailed","resetPasswordInProgress","resetPasswordFailed","resetPasswordWasSent","setNewPasswordInProgress","setNewPasswordFailed","rootReducer","combineReducers","action","isBunInArray","length","payload","uuid","copiedStateArr","dragCard","dragIndex","prevItem","splice","hoverIndex","bunsStateArr","emptyCountBuns","bunsInConstructor","ingredient","reduce","prev","curr","secondBunPrice","orderDetailsReducer","authReducer","Tabs","goToViolation","querySelector","scrollIntoView","behavior","tab","active","BurgerIngredients","useInView","threshold","bunsRef","toBunsView","sauceRef","toSauceView","mainRef","toMainView","useEffect","container","scrollerStyle","scroller","ConstructorListElement","index","moveCardHandler","burgerConstructorIngredientsLength","collect","monitor","isDragging","opacity","useDrop","accept","hover","current","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","dropRef","useRef","constructorListContainer","isLocked","text","thumbnail","handleClose","Total","BurgerConstructor","bun","history","useHistory","makeOrder","log","alert","submitOrderOnClickHandler","getItem","drop","uuidv4","dropTarget","cardsScrollerContainer","scrollerConstructor","cardsScroller","totalContainer","ModalOverlay","modalsStyles","modalOverlay","modalsContainer","Modal","title","closeModals","handleEscKeydown","e","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","closeButton","OrderDetails","orderNumber","orderDetailsStyle","orderDetailsContainer","doneImage","SendOrderModalPage","isOrderDetailsModalShown","ConstructorPage","DndProvider","backend","HTML5Backend","content","Form","header","buttonText","handleSubmit","form","onSubmit","input","button","useForm","React","useState","formData","setFormData","handleInputChange","target","LoginPage","useCallback","preventDefault","from","formContainer","onChange","RegistrationPage","placeholder","ForgotPasswordPage","handleClick","ResetPasswordPage","icon","setIcon","passwordWasSent","keyword","response","onIconClick","ProfilePage","isButtonsShown","inputActive","isEditButtonsShown","setEditButtonShown","checkUser","toggleButtonsShown","submitProfileChange","cancelProfileChange","formStyle","navigation","list","listElement","color","removeItem","disabled","NotFoundPage","notFound","linkStyle","HeaderMenuItem","Icon","iconStatus","path","isLinkActive","useRouteMatch","headerMenuItemText","BurgerMenuIcon","ListMenuIcon","ProfileMenuIcon","AppHeader","isConstructorActive","exact","isListActive","isProfileActive","headerContainer","headerMenu","headerMenuItem","logo","ProtectedRoute","notForAuthorisedRoute","rest","refToken","checkToken","render","IngredientDetails","statsTextStyle","statsDigitsStyle","useParams","find","ingredientDetailsStyle","ingredientDetailsContainer","stats","stat","IngredientModalPage","goBack","App","getIngredients","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore"],"mappings":"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","file":"static/js/main.cbdd8287.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalOverlay\":\"ModalOverlay_modalOverlay__3A6em\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound\":\"notFoundPage_notFound__3mBfC\"};","const config = {\n    baseUrl: 'https://norma.nomoreparties.space/api',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n}\n\nclass API {\n    constructor({baseUrl, headers}) {\n        this._url = baseUrl;\n        this._headers = headers;\n    }\n\n    getIngredients() {\n        return fetch(`${this._url}/ingredients`)\n            .then(this._checkResponse)\n    };\n\n    saveOrder(body) {\n        return fetch(`${this._url}/orders`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify(body)\n        })\n            .then(this._checkResponse)\n    }\n\n    resetPassword(email) {\n        return fetch(`${this._url}/password-reset`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({email})\n        })\n            .then(this._checkResponse)\n    }\n\n    setNewPassword(password, token) {\n        return fetch(`${this._url}/password-reset/reset`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({password, token})\n        })\n            .then(this._checkResponse)\n    }\n\n    register(email, password, name) {\n        return fetch(`${this._url}/auth/register`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({email, password, name})\n        })\n            .then(this._checkResponse)\n    }\n\n    login(email, password) {\n        return fetch(`${this._url}/auth/login`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({email, password})\n        })\n            .then(this._checkResponse)\n    }\n\n    logout(refreshToken) {\n        return fetch(`${this._url}/auth/logout`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({token: refreshToken})\n        })\n            .then(this._checkResponse)\n    }\n\n    refreshToken(refreshToken) {\n        return fetch(`${this._url}/auth/token`, {\n            method: \"POST\",\n            headers: this._headers,\n            body: JSON.stringify({token: refreshToken})\n        })\n            .then(this._checkResponse)\n    }\n\n    getProfileInfo(token) {\n        return fetch(`${this._url}/auth/user`, {\n            method: \"GET\",\n            headers: {...this._headers, authorization: `Bearer ${token}`},\n        })\n            .then(this._checkResponse)\n    }\n\n    setProfileInfo(token, profileInfo) {\n        return fetch(`${this._url}/auth/user`, {\n            method: \"PATCH\",\n            headers: {...this._headers, 'authorization': `Bearer ${token}`},\n            body: JSON.stringify(profileInfo)\n        })\n            .then(this._checkResponse)\n    }\n\n    _checkResponse(res) {\n        if (res.status === 200) {\n            return res.json()\n        }\n        return res.json().then(res => {\n            throw res.message\n        })\n    }\n}\n\nconst api = new API(config);\n\nexport default api;\n","import api from \"../../api/Api\";\n\nexport const TOTAL_PRICE = 'TOTAL_PRICE';\nexport const RESET_TOTAL_PRICE = 'RESET_TOTAL_PRICE';\nexport const GET_INGREDIENTS_REQUEST = 'GET_INGREDIENTS_REQUEST';\nexport const GET_INGREDIENTS_SUCCESS = 'GET_INGREDIENTS_SUCCESS';\nexport const GET_INGREDIENTS_FAILED = 'GET_INGREDIENTS_FAILED';\nexport const ADD_INGREDIENT = 'ADD_INGREDIENT'\nexport const DELETE_INGREDIENT = 'DELETE_INGREDIENT'\nexport const MOVE_INGREDIENT = 'MOVE_INGREDIENT';\nexport const INCREASE_INGREDIENT_COUNT = 'INCREASE_INGREDIENT_COUNT'\nexport const DECREASE_INGREDIENT_COUNT = 'DECREASE_INGREDIENT_COUNT'\nexport const SET_CURRENT_INGREDIENT = 'SET_CURRENT_INGREDIENT';\nexport const SET_INGREDIENT_MODAL_SHOW = 'SET_INGREDIENT_MODAL_SHOW';\nexport const SET_INGREDIENT_MODAL_CLOSED = 'SET_INGREDIENT_MODAL_CLOSED';\nexport const CLOSE_INGREDIENT_MODAL = 'CLOSE_INGREDIENT_MODAL';\nexport const DELETE_ALL_INGREDIENTS = 'DELETE_ALL_INGREDIENTS';\nexport const RESET_INGREDIENT_COUNT = 'RESET_INGREDIENT_COUNT';\n\n\nexport const SET_CURRENT_TAB = 'SET_CURRENT_TAB';\n\nfunction setIngredientsRequestFailed() {\n    return {\n        type: GET_INGREDIENTS_FAILED\n    }\n}\n\nexport function getIngredients() {\n    return function (dispatch) {\n        dispatch({\n            type: GET_INGREDIENTS_REQUEST\n        });\n        return api.getIngredients()\n            .then(res => {\n                if (res && res.success) {\n                    const data = res.data.map((item) => {\n                        item['ingredientCount'] = 0\n                        return item;\n                    })\n                    dispatch({\n                        type: GET_INGREDIENTS_SUCCESS,\n                        ingredients: data\n                    });\n                } else {\n                    dispatch(setIngredientsRequestFailed());\n                }\n                return res.data\n            }).catch(err => {\n            console.error(err);\n            dispatch(setIngredientsRequestFailed())\n        });\n    };\n}\n\nexport function setCurrentTab(currentTab) {\n    return function (dispatch) {\n        dispatch({\n            type: SET_CURRENT_TAB,\n            currentTab: currentTab\n        })\n    }\n}\n","import api from \"../../api/Api\";\nimport {DELETE_ALL_INGREDIENTS, RESET_TOTAL_PRICE} from \"./burger-ingredients\";\n\nexport const SET_ORDER_DETAILS = 'SET_ORDER_DETAILS';\nexport const CLOSE_ORDER_MODAL = 'CLOSE_ORDER_MODAL';\nexport const SET_ORDER_REQUEST = 'SET_ORDER_REQUEST';\nexport const SET_ORDER_REQUEST_FAILED = 'SET_ORDER_REQUEST_FAILED';\n\nfunction setOrderRequestFailed() {\n    return {\n        type: SET_ORDER_REQUEST_FAILED\n    }\n}\n\nfunction resetConstructor() {\n    return function (dispatch) {\n        dispatch({\n            type: DELETE_ALL_INGREDIENTS\n        })\n        dispatch({\n            type: RESET_TOTAL_PRICE\n        })\n    }\n}\n\nexport function setOrder(body) {\n    return function (dispatch) {\n        dispatch({\n            type: SET_ORDER_REQUEST\n        });\n        api.saveOrder(body)\n            .then(res => {\n                if (res && res.success) {\n                    dispatch({\n                        type: SET_ORDER_DETAILS,\n                        details: res\n                    })\n                } else {\n                    dispatch(setOrderRequestFailed());\n                }\n            })\n            .then(() => dispatch(resetConstructor()))\n            .catch(err => {\n                console.error(err);\n                dispatch(setOrderRequestFailed())\n            });\n    };\n}\n\n","import {\n    CLOSE_ORDER_MODAL,\n    SET_ORDER_DETAILS,\n    SET_ORDER_REQUEST,\n    SET_ORDER_REQUEST_FAILED,\n} from \"../actions/burger-constructor-ingredients\";\n\nconst initialState = {\n    orderDetails: {},\n    orderModalShown: false,\n    orderRequest: false,\n    orderRequestFailed: false\n};\n\nexport const orderDetailsReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_ORDER_REQUEST: {\n            return {\n                ...state,\n                orderRequest: true\n            }\n        }\n        case SET_ORDER_DETAILS: {\n            return {\n                ...state,\n                orderDetails: action.details,\n                orderModalShown: true,\n                orderRequestFailed: false,\n                orderRequest: false\n            }\n        }\n        case SET_ORDER_REQUEST_FAILED: {\n            return {\n                ...state,\n                orderRequest: false,\n                orderRequestFailed: true,\n                orderDetails: {}\n            }\n        }\n\n        case CLOSE_ORDER_MODAL: {\n            return {\n                ...state,\n                orderModalShown: false,\n                orderDetails: {}\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","import PropTypes from \"prop-types\";\n\nexport const ingredientsPropTypes = PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n    proteins: PropTypes.number.isRequired,\n    fat: PropTypes.number.isRequired,\n    carbohydrates: PropTypes.number.isRequired,\n    calories: PropTypes.number.isRequired,\n    price: PropTypes.number.isRequired,\n    image: PropTypes.string.isRequired,\n    image_mobile: PropTypes.string.isRequired,\n    image_large: PropTypes.string.isRequired,\n    __v: PropTypes.number.isRequired,\n});\n\nexport const cartPropTypes = PropTypes.shape({\n    image: PropTypes.string.isRequired,\n    price: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired\n});\n\nexport const orderDetailsPropTypes = PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    order: PropTypes.object.isRequired,\n    success: PropTypes.bool.isRequired\n});\n","import React from 'react'\nimport style from './Card.module.css'\nimport {Counter, CurrencyIcon} from '@ya.praktikum/react-developer-burger-ui-components'\nimport {cartPropTypes} from \"../../utils/propTypesTemplates\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {SET_CURRENT_INGREDIENT} from \"../../services/actions/burger-ingredients\";\nimport {useDrag} from \"react-dnd\";\nimport {NavLink, useLocation} from \"react-router-dom\";\n\nconst Card = (props) => {\n    const dispatch = useDispatch();\n    const itemCount = useSelector(store => store.ingredientReducer.ingredients.filter(item => item._id === props._id)[0].ingredientCount)\n    const location = useLocation();\n\n    const setCardState = () => {\n        dispatch({\n            type: SET_CURRENT_INGREDIENT,\n            item: props\n        })\n    }\n\n    const [, dragRef] = useDrag({\n        type: 'ingredient',\n        item: {props}\n    })\n\n    return (\n        <NavLink className={style.link} to={\n            {\n                pathname: `ingredients/${props._id}`,\n                state: {background: location}\n            }\n        }>\n            <div className={`${style.dragIco} ${'mt-6 mb-10'}`}\n                 onClick={setCardState} ref={dragRef}>\n                <Counter count={itemCount} size=\"small\"/>\n                <img src={props.image} alt={props.name}/>\n                <p className={`${style.price} ${'text text_type_digits-default mt-1 mb-1'}`}>\n                    {props.price}\n                    <CurrencyIcon type=\"primary\"/>\n                </p>\n                <p className={`${style.name} ${'text text_type_main-default'}`}>\n                    {props.name}\n                </p>\n            </div>\n        </NavLink>\n    )\n}\n\nCard.propTypes = {\n    props: cartPropTypes,\n}\n\nexport default Card\n","import style from \"../burger-ingredients/BurgerIngredients.module.css\";\nimport Card from \"../card/Card\";\nimport {ingredientsPropTypes} from \"../../utils/propTypesTemplates\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport const BUN = 'Булки'\nexport const SAUCE = 'Соусы'\nexport const MAIN = 'Начинки'\n\nconst switchDataString = (key) => {\n    let dataString;\n    switch (key) {\n        case BUN:\n            dataString = 'bun';\n            break;\n        case SAUCE:\n            dataString = 'sauce';\n            break;\n        case MAIN:\n            dataString = 'main';\n            break;\n        default:\n            dataString = 'inner';\n    }\n\n    return dataString;\n}\n\nconst filterBurgerData = (dataString, data) => {\n    return data.filter(item => {\n        return item.type === dataString\n    });\n\n}\n\nexport const getPartOfBurgerData = (children, data) => {\n    const dataString = switchDataString(children);\n    let partOfBurger;\n    if (dataString !== 'inner') {\n        partOfBurger = (filterBurgerData(dataString, data));\n        return partOfBurger;\n    } else {\n        partOfBurger = filterBurgerData(switchDataString(MAIN), data)\n            .concat(filterBurgerData(switchDataString(SAUCE), data));\n        return partOfBurger;\n    }\n}\n\nconst Ingredients = ({children, data}) => {\n    return (\n        <>\n            <h2 id={children} className={'text text_type_main-medium'}>\n                {children}\n            </h2>\n            <div className={style.cardsContainer}>\n                {getPartOfBurgerData(children, data).map(item => {\n                    return (\n                        <Card\n                            key={item._id}\n                            {...item}\n                        />\n                    )\n                })}\n            </div>\n        </>\n    )\n}\n\nIngredients.propTypes = {\n    data: PropTypes.arrayOf(ingredientsPropTypes.isRequired).isRequired,\n    children: PropTypes.string,\n}\n\nexport default Ingredients;\n","import {\n    ADD_INGREDIENT,\n    CLOSE_INGREDIENT_MODAL,\n    DECREASE_INGREDIENT_COUNT,\n    DELETE_ALL_INGREDIENTS,\n    DELETE_INGREDIENT,\n    GET_INGREDIENTS_FAILED,\n    GET_INGREDIENTS_REQUEST,\n    GET_INGREDIENTS_SUCCESS,\n    INCREASE_INGREDIENT_COUNT,\n    MOVE_INGREDIENT,\n    RESET_INGREDIENT_COUNT,\n    RESET_TOTAL_PRICE,\n    SET_CURRENT_INGREDIENT,\n    SET_CURRENT_TAB,\n    SET_INGREDIENT_MODAL_CLOSED,\n    SET_INGREDIENT_MODAL_SHOW,\n    TOTAL_PRICE\n} from \"../actions/burger-ingredients\";\nimport {BUN} from \"../../components/ingredients/Ingredients\";\n\nconst initialState = {\n    ingredients: [],\n    constructorIngredients: [],\n    ingredientsRequest: false,\n    ingredientsFailed: false,\n\n    ingredientModalShow: false,\n    currentIngredient: {},\n\n    currentTab: BUN,\n    totalPrice: 0\n};\n\nexport const ingredientReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case GET_INGREDIENTS_REQUEST: {\n            return {\n                ...state,\n                ingredientsRequest: true\n            };\n        }\n        case GET_INGREDIENTS_SUCCESS: {\n            return {...state, ingredientsFailed: false, ingredients: action.ingredients, ingredientsRequest: false};\n        }\n        case GET_INGREDIENTS_FAILED: {\n            return {...state, ingredientsFailed: true, ingredientsRequest: false, ingredients: []};\n        }\n\n        case SET_CURRENT_INGREDIENT: {\n            return {\n                ...state,\n                ingredientModalShow: true,\n                currentIngredient: action.item\n            }\n        }\n\n        case SET_INGREDIENT_MODAL_SHOW: {\n            return {\n                ...state,\n                ingredientModalShow: true,\n            }\n        }\n        case SET_INGREDIENT_MODAL_CLOSED: {\n            return {\n                ...state,\n                ingredientModalShow: false,\n            }\n        }\n\n        case ADD_INGREDIENT: {\n            const isBunInArray = state.constructorIngredients.filter(item => item.type === 'bun').length !== 0\n            if (action.payload.type === 'bun' && isBunInArray) {\n                return {\n                    ...state,\n                    constructorIngredients: state.constructorIngredients.map((item) => {\n                        return item.type === 'bun' ? action.payload : item\n                    })\n                }\n            } else {\n                return {\n                    ...state,\n                    constructorIngredients: [...state.constructorIngredients, action.payload]\n                }\n            }\n        }\n        case DELETE_INGREDIENT: {\n            return {\n                ...state,\n                constructorIngredients: [...state.constructorIngredients].filter(item => item.uuid !== action.uuid)\n            }\n        }\n        case DELETE_ALL_INGREDIENTS: {\n            return {\n                ...state,\n                constructorIngredients: []\n            }\n        }\n        case MOVE_INGREDIENT: {\n            const copiedStateArr = state.constructorIngredients.filter(item => item.type !== 'bun');\n            const dragCard = copiedStateArr[action.dragIndex];\n            const prevItem = copiedStateArr.splice(action.hoverIndex, 1, dragCard)\n            copiedStateArr.splice(action.dragIndex, 1, prevItem[0]);\n            const bunsStateArr = state.constructorIngredients.filter(item => item.type === 'bun');\n            return {\n                ...state,\n                constructorIngredients: [...bunsStateArr, ...copiedStateArr]\n\n            }\n        }\n        case INCREASE_INGREDIENT_COUNT: {\n            const bunsInConstructor = state.constructorIngredients.filter(item => item.type === 'bun')\n            let emptyCountBuns;\n            if (action.ingredient.type === 'bun' &&\n                bunsInConstructor.filter(item => item._id !== action.ingredient._id).length === 0) {\n                emptyCountBuns = {\n                    ...state,\n                    ingredients: [...state.ingredients].map(item => {\n                        return item.type === 'bun' ? {\n                            ...item,\n                            ingredientCount: 0\n                        } : item\n                    })\n                }\n                return {\n                    ...state,\n                    ingredients: emptyCountBuns.ingredients.map(item =>\n                        item._id === action.ingredient._id ? {\n                            ...item,\n                            ingredientCount: 2\n                        } : item)\n                }\n            } else {\n                return {\n                    ...state,\n                    ingredients: [...state.ingredients].map(item => item._id === action.ingredient._id ? {\n                            ...item,\n                            ingredientCount: ++item.ingredientCount\n                        } : item\n                    )\n                }\n            }\n        }\n        case DECREASE_INGREDIENT_COUNT: {\n            return {\n                ...state,\n                ingredients: [...state.ingredients].map(item => item._id === action._id ? {\n                        ...item,\n                        ingredientCount: --item.ingredientCount\n                    } : item\n                )\n            }\n        }\n\n        case CLOSE_INGREDIENT_MODAL: {\n            return {\n                ...state,\n                ingredientModalShow: false,\n            }\n        }\n\n        case SET_CURRENT_TAB: {\n            return {\n                ...state,\n                currentTab: action.currentTab\n            }\n        }\n\n        case TOTAL_PRICE: {\n            const totalPrice = [...state.constructorIngredients].map(item => item.price)\n                .reduce(function (prev, curr) {\n                    return prev + curr\n                });\n            const secondBunPrice = [...state.constructorIngredients].filter(item => item.type === 'bun')[0]?.price\n                ? [...state.constructorIngredients].filter(item => item.type === 'bun')[0].price : 0\n            return {\n                ...state,\n                totalPrice: totalPrice + secondBunPrice\n            };\n        }\n        case RESET_TOTAL_PRICE: {\n            return {\n                ...state,\n                totalPrice: 0\n            }\n        }\n\n        case RESET_INGREDIENT_COUNT: {\n            return {\n                ...state,\n                ingredients: state.ingredients.map(item => {\n                    item.ingredientCount = 0\n                    return item\n                })\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","export function setCookie(name, value, props) {\n    props = props || {};\n    let exp = props.expires;\n    if (typeof exp == 'number' && exp) {\n        const d = new Date();\n        d.setTime(d.getTime() + exp * 1000);\n        exp = props.expires = d;\n    }\n    if (exp && exp.toUTCString) {\n        props.expires = exp.toUTCString();\n    }\n    value = encodeURIComponent(value);\n    let updatedCookie = name + '=' + value;\n    for (const propName in props) {\n        updatedCookie += '; ' + propName;\n        const propValue = props[propName];\n        if (propValue !== true) {\n            updatedCookie += '=' + propValue;\n        }\n    }\n    document.cookie = updatedCookie;\n}\n\nexport function getCookie(name) {\n    const matches = document.cookie.match(\n        // eslint-disable-next-line\n        new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n    );\n    return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n","import api from \"../../api/Api\";\nimport {setCookie} from \"../../utils/cookie\";\n\nexport const REGISTER_REQUEST_IN_PROGRESS = \"REGISTER_REQUEST_IN_PROGRESS\"\nexport const REGISTER_REQUEST_FAILED = \"REGISTER_REQUEST_FAILED\"\nexport const REGISTER_REQUEST_SUCCESS = \"REGISTER_REQUEST_SUCCESS\"\n\nexport const LOGIN_REQUEST_IN_PROGRESS = \"LOGIN_REQUEST_IN_PROGRESS\"\nexport const LOGIN_REQUEST_FAILED = \"LOGIN_REQUEST_FAILED\"\nexport const LOGIN_REQUEST_SUCCESS = \"LOGIN_REQUEST_SUCCESS\"\n\nexport const LOGOUT_REQUEST_IN_PROGRESS = \"LOGOUT_REQUEST_IN_PROGRESS\"\nexport const LOGOUT_REQUEST_FAILED = \"LOGOUT_REQUEST_FAILED\"\nexport const LOGOUT_REQUEST_SUCCESS = \"LOGOUT_REQUEST_SUCCESS\"\n\nexport const REFRESH_TOKEN_REQUEST_IN_PROGRESS = \"REFRESH_TOKEN_REQUEST_IN_PROGRESS\"\nexport const REFRESH_TOKEN_REQUEST_FAILED = \"REFRESH_TOKEN_REQUEST_FAILED\"\nexport const REFRESH_TOKEN_REQUEST_SUCCESS = \"REFRESH_TOKEN_REQUEST_SUCCESS\"\n\nexport const GET_PROFILE_INFO_IN_PROGRESS = \"GET_PROFILE_INFO_IN_PROGRESS\"\nexport const GET_PROFILE_INFO_FAILED = \"GET_PROFILE_INFO_FAILED\"\nexport const GET_PROFILE_INFO_SUCCESS = \"GET_PROFILE_INFO_SUCCESS\"\n\nexport const SET_PROFILE_INFO_IN_PROGRESS = \"SET_PROFILE_INFO_IN_PROGRESS\"\nexport const SET_PROFILE_INFO_FAILED = \"SET_PROFILE_INFO_FAILED\"\nexport const SET_PROFILE_INFO_SUCCESS = \"SET_PROFILE_INFO_SUCCESS\"\n\nexport const RESET_PASSWORD_IN_PROGRESS = \"RESET_PASSWORD_IN_PROGRESS\"\nexport const RESET_PASSWORD_FAILED = \"RESET_PASSWORD_FAILED\"\nexport const RESET_PASSWORD_SUCCESS = \"RESET_PASSWORD_SUCCESS\"\n\nexport const SET_NEW_PASSWORD_IN_PROGRESS = \" SET_NEW_PASSWORD_IN_PROGRESS\"\nexport const SET_NEW_PASSWORD_FAILED = \"SET_NEW_PASSWORD_FAILED\"\nexport const SET_NEW_PASSWORD_SUCCESS = \"SET_NEW_PASSWORD_SUCCESS\"\n\nexport function register(email, password, name) {\n    return function (dispatch) {\n        dispatch({\n            type: REGISTER_REQUEST_IN_PROGRESS\n        });\n        return api.register(email, password, name)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: REGISTER_REQUEST_SUCCESS,\n                    user: res.user,\n                    accessToken: res.accessToken.split('Bearer ')[1],\n                    refreshToken: res.refreshToken\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(registerFailed())\n                return err\n            })\n    }\n}\n\nexport function login(email, password) {\n    return function (dispatch) {\n        dispatch({\n            type: LOGIN_REQUEST_IN_PROGRESS\n        });\n        return api.login(email, password)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: LOGIN_REQUEST_SUCCESS,\n                    user: res.user,\n                    accessToken: res.accessToken.split('Bearer ')[1],\n                    refreshToken: res.refreshToken\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(loginFailed())\n                return err\n            })\n    }\n}\n\nexport function logout(refreshToken) {\n    return function (dispatch) {\n        dispatch({\n            type: LOGOUT_REQUEST_IN_PROGRESS\n        });\n        return api.logout(refreshToken)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: LOGOUT_REQUEST_SUCCESS,\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(logoutFailed())\n                return err\n            })\n    }\n}\n\nexport function refreshToken(refreshToken) {\n    return function (dispatch) {\n        dispatch({\n            type: REFRESH_TOKEN_REQUEST_IN_PROGRESS\n        });\n        return api.refreshToken(refreshToken)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: REFRESH_TOKEN_REQUEST_SUCCESS,\n                    accessToken: res.accessToken.split('Bearer ')[1],\n                    refreshToken: res.refreshToken\n                })\n                localStorage.setItem(\"refreshToken\", res.refreshToken)\n                setCookie(\"accessToken\", res.accessToken.split('Bearer ')[1])\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(refreshFailed())\n                throw err\n            })\n    }\n}\n\n\nexport function getProfileInfo(token) {\n    return function (dispatch) {\n        dispatch({\n            type: GET_PROFILE_INFO_IN_PROGRESS\n        });\n        return api.getProfileInfo(token)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: GET_PROFILE_INFO_SUCCESS,\n                    user: res.user,\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(getProfileFailed())\n                return err\n            })\n    }\n}\n\nexport function setProfileInfo(token, email, password, name) {\n    return function (dispatch) {\n        dispatch({\n            type: SET_PROFILE_INFO_IN_PROGRESS\n        });\n        return api.setProfileInfo(token, email, password, name)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: SET_PROFILE_INFO_SUCCESS,\n                    user: res.user,\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(setProfileFailed())\n                return err\n            })\n    }\n}\n\nexport function resetPassword(email) {\n    return function (dispatch) {\n        dispatch({\n            type: RESET_PASSWORD_IN_PROGRESS\n        });\n        return api.resetPassword(email)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: RESET_PASSWORD_SUCCESS,\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(resetPasswordFailed())\n                return err\n            })\n    }\n}\n\nexport function setNewPassword(email, token) {\n    return function (dispatch) {\n        dispatch({\n            type: SET_NEW_PASSWORD_IN_PROGRESS\n        });\n        return api.setNewPassword(email, token)\n            .then(res => checkSuccess(res))\n            .then(res => {\n                dispatch({\n                    type: SET_NEW_PASSWORD_SUCCESS,\n                })\n                return res\n            })\n            .catch(err => {\n                console.error(err)\n                dispatch(setNewPasswordFailed())\n                return err\n            })\n    }\n}\n\nfunction checkSuccess(res) {\n    if (res && res.success) {\n        return res\n    }\n    throw res.message()\n}\n\nfunction resetPasswordFailed() {\n    return {\n        type: RESET_PASSWORD_FAILED\n    }\n}\n\nfunction setNewPasswordFailed() {\n    return {\n        type: SET_NEW_PASSWORD_FAILED\n    }\n}\n\nfunction getProfileFailed() {\n    return {\n        type: GET_PROFILE_INFO_FAILED\n    }\n}\n\nfunction setProfileFailed() {\n    return {\n        type: SET_PROFILE_INFO_FAILED\n    }\n}\n\nfunction registerFailed() {\n    return {\n        type: REGISTER_REQUEST_FAILED\n    }\n}\n\nfunction loginFailed() {\n    return {\n        type: LOGIN_REQUEST_FAILED\n    }\n}\n\nfunction refreshFailed() {\n    return {\n        type: REFRESH_TOKEN_REQUEST_FAILED\n    }\n}\n\nfunction logoutFailed() {\n    return {\n        type: LOGOUT_REQUEST_FAILED\n    }\n}\n","import {\n    GET_PROFILE_INFO_FAILED,\n    GET_PROFILE_INFO_IN_PROGRESS,\n    GET_PROFILE_INFO_SUCCESS,\n    LOGIN_REQUEST_FAILED,\n    LOGIN_REQUEST_IN_PROGRESS,\n    LOGIN_REQUEST_SUCCESS,\n    LOGOUT_REQUEST_FAILED,\n    LOGOUT_REQUEST_IN_PROGRESS,\n    LOGOUT_REQUEST_SUCCESS,\n    REFRESH_TOKEN_REQUEST_FAILED,\n    REFRESH_TOKEN_REQUEST_IN_PROGRESS,\n    REFRESH_TOKEN_REQUEST_SUCCESS,\n    REGISTER_REQUEST_FAILED,\n    REGISTER_REQUEST_IN_PROGRESS,\n    REGISTER_REQUEST_SUCCESS,\n    RESET_PASSWORD_FAILED,\n    RESET_PASSWORD_IN_PROGRESS,\n    RESET_PASSWORD_SUCCESS,\n    SET_NEW_PASSWORD_FAILED,\n    SET_NEW_PASSWORD_IN_PROGRESS,\n    SET_NEW_PASSWORD_SUCCESS,\n    SET_PROFILE_INFO_FAILED,\n    SET_PROFILE_INFO_IN_PROGRESS,\n    SET_PROFILE_INFO_SUCCESS\n} from \"../actions/auth\";\n\nconst initialState = {\n    registerRequestInProgress: false,\n    registerRequestFailed: false,\n    accessToken: \"\",\n    refreshToken: \"\",\n    user: {},\n\n    loginRequestInProgress: false,\n    loginRequestFailed: false,\n    logoutRequestInProgress: false,\n    logoutRequestFailed: false,\n    isLoggedIn: false,\n\n    tokenRefreshRequestInProgress: false,\n    tokenRefreshRequestFailed: false,\n\n    getProfileInfoInProgress: false,\n    getProfileInfoFailed: false,\n\n    setProfileInfoInProgress: false,\n    setProfileInfoFailed: false,\n\n    resetPasswordInProgress: false,\n    resetPasswordFailed: false,\n    resetPasswordWasSent: false,\n\n    setNewPasswordInProgress: false,\n    setNewPasswordFailed: false,\n}\n\nexport const authReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case REGISTER_REQUEST_IN_PROGRESS: {\n            return {\n                ...state,\n                registerRequestInProgress: true\n            }\n        }\n        case REGISTER_REQUEST_SUCCESS: {\n            return {\n                ...state,\n                registerRequestFailed: false,\n                user: action.user,\n                accessToken: action.accessToken,\n                refreshToken: action.refreshToken,\n                registerRequestInProgress: false,\n                isLoggedIn: true\n            };\n        }\n        case REGISTER_REQUEST_FAILED: {\n            return {\n                ...state,\n                registerRequestFailed: true,\n                registerRequestInProgress: false,\n                user: {},\n                accessToken: \"\",\n                refreshToken: \"\"\n            };\n        }\n\n        case LOGIN_REQUEST_IN_PROGRESS: {\n            return {\n                ...state,\n                loginRequestInProgress: true\n            }\n        }\n        case LOGIN_REQUEST_SUCCESS: {\n            return {\n                ...state,\n                loginRequestFailed: false,\n                user: action.user,\n                accessToken: action.accessToken,\n                refreshToken: action.refreshToken,\n                isLoggedIn: true,\n                loginRequestInProgress: false\n            }\n        }\n        case LOGIN_REQUEST_FAILED: {\n            return {\n                ...state,\n                loginRequestFailed: true,\n                loginRequestInProgress: false,\n                user: {},\n                accessToken: \"\",\n                refreshToken: \"\"\n            }\n        }\n\n        case LOGOUT_REQUEST_IN_PROGRESS: {\n            return {\n                ...state,\n                logoutRequestInProgress: true\n            }\n        }\n        case LOGOUT_REQUEST_SUCCESS: {\n            return {\n                ...state,\n                logoutRequestFailed: false,\n                user: {},\n                accessToken: \"\",\n                refreshToken: \"\",\n                logoutRequestInProgress: false,\n                isLoggedIn: false\n            }\n        }\n        case LOGOUT_REQUEST_FAILED: {\n            return {\n                ...state,\n                logoutRequestFailed: true,\n                logoutRequestInProgress: false,\n                user: state.user,\n                accessToken: state.accessToken,\n                refreshToken: state.refreshToken\n            }\n        }\n\n        case REFRESH_TOKEN_REQUEST_IN_PROGRESS: {\n            return {\n                ...state,\n                tokenRefreshRequestInProgress: true\n            }\n        }\n        case REFRESH_TOKEN_REQUEST_SUCCESS: {\n            return {\n                ...state,\n                tokenRefreshRequestFailed: false,\n                tokenRefreshRequestInProgress: false,\n                accessToken: action.accessToken,\n                refreshToken: action.refreshToken\n            }\n        }\n        case REFRESH_TOKEN_REQUEST_FAILED: {\n            return {\n                ...state,\n                tokenRefreshRequestFailed: true,\n                tokenRefreshRequestInProgress: false,\n                accessToken: \"\"\n            }\n        }\n\n        case GET_PROFILE_INFO_IN_PROGRESS: {\n            return {\n                ...state,\n                getProfileInfoInProgress: true\n            }\n        }\n        case GET_PROFILE_INFO_SUCCESS: {\n            return {\n                ...state,\n                getProfileInfoFailed: false,\n                getProfileInfoInProgress: false,\n                user: action.user\n            }\n        }\n        case GET_PROFILE_INFO_FAILED: {\n            return {\n                ...state,\n                getProfileInfoFailed: true,\n                getProfileInfoInProgress: false\n            }\n        }\n\n        case SET_PROFILE_INFO_IN_PROGRESS: {\n            return {\n                ...state,\n                setProfileInfoInProgress: true\n            }\n        }\n        case SET_PROFILE_INFO_SUCCESS: {\n            return {\n                ...state,\n                setProfileInfoFailed: false,\n                setProfileInfoInProgress: false,\n                user: action.user\n            }\n        }\n        case SET_PROFILE_INFO_FAILED: {\n            return {\n                ...state,\n                user: {},\n                setProfileInfoFailed: true,\n                setProfileInfoInProgress: false\n            }\n        }\n\n        case RESET_PASSWORD_IN_PROGRESS: {\n            return {\n                ...state,\n                resetPasswordInProgress: true\n            }\n        }\n        case RESET_PASSWORD_SUCCESS: {\n            return {\n                ...state,\n                resetPasswordFailed: false,\n                resetPasswordInProgress: false,\n                resetPasswordWasSent: true,\n            }\n        }\n        case RESET_PASSWORD_FAILED: {\n            return {\n                ...state,\n                resetPasswordFailed: true,\n                resetPasswordInProgress: false,\n                resetPasswordWasSent: false\n            }\n        }\n\n        case SET_NEW_PASSWORD_IN_PROGRESS: {\n            return {\n                ...state,\n                setProfileInfoInProgress: true\n            }\n        }\n        case SET_NEW_PASSWORD_SUCCESS: {\n            return {\n                ...state,\n                setNewPasswordFailed: false,\n                setNewPasswordInProgress: false,\n                resetPasswordWasSent: false,\n            }\n        }\n        case SET_NEW_PASSWORD_FAILED: {\n            return {\n                ...state,\n                setNewPasswordFailed: true,\n                setNewPasswordInProgress: false\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","import {combineReducers} from 'redux';\nimport {orderDetailsReducer} from \"./burger-constructor-ingredients\"\nimport {ingredientReducer} from \"./burger-ingredients\"\nimport {authReducer} from \"./auth\";\n\nexport const rootReducer = combineReducers({\n    ingredientReducer,\n    orderDetailsReducer,\n    authReducer\n})\n","import React, {useEffect} from \"react\";\nimport {Tab} from '@ya.praktikum/react-developer-burger-ui-components'\n\nimport style from './BurgerIngredients.module.css'\nimport scrollerStyle from '../../pages/constructor-page/constructorPage.module.css'\nimport Ingredients, {BUN, MAIN, SAUCE} from \"../ingredients/Ingredients\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useInView} from \"react-intersection-observer\";\nimport {setCurrentTab} from \"../../services/actions/burger-ingredients\";\n\nconst Tabs = () => {\n    const currentTab = useSelector(store => store.ingredientReducer.currentTab)\n    const dispatch = useDispatch();\n\n    const goToViolation = (id) => {\n        const violation = document.querySelector(`#` + id);\n        violation.scrollIntoView({\n            behavior: \"smooth\"\n        });\n        dispatch(setCurrentTab(id))\n    };\n\n    return (\n        <div className={`${style.tab} ${'mb-10'}`}>\n            <Tab value={BUN} active={currentTab === BUN} onClick={() => {\n                goToViolation(BUN)\n            }}>\n                {BUN}\n            </Tab>\n            <Tab value={SAUCE} active={currentTab === SAUCE} onClick={() => {\n                goToViolation(SAUCE)\n            }}>\n                {SAUCE}\n            </Tab>\n            <Tab value={MAIN} active={currentTab === MAIN} onClick={() => {\n                goToViolation(MAIN)\n            }}>\n                {MAIN}\n            </Tab>\n        </div>\n    )\n}\n\nconst BurgerIngredients = () => {\n    const data = useSelector(store => store.ingredientReducer.ingredients);\n    const [bunsRef, toBunsView] = useInView({threshold: 0});\n    const [sauceRef, toSauceView] = useInView({threshold: 0});\n    const [mainRef, toMainView] = useInView({threshold: 0});\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (toBunsView) {\n            dispatch(setCurrentTab(BUN))\n        } else if (toSauceView) {\n            dispatch(setCurrentTab(SAUCE))\n        } else if (toMainView) {\n            dispatch(setCurrentTab(MAIN))\n        }\n    }, [dispatch, toBunsView, toMainView, toSauceView]);\n\n    return (\n        <section className={style.container}>\n            <h1 className={`${'mt-10 mb-5 text text_type_main-large'}`}>\n                Соберите бургер\n            </h1>\n            <Tabs/>\n            {data && <div className={scrollerStyle.scroller}>\n                <div ref={bunsRef}>\n                    <Ingredients data={data}>\n                        {BUN}\n                    </Ingredients>\n                </div>\n                <div ref={sauceRef}>\n                    <Ingredients data={data}>\n                        {SAUCE}\n                    </Ingredients>\n                </div>\n                <div ref={mainRef}>\n                    <Ingredients data={data}>\n                        {MAIN}\n                    </Ingredients>\n                </div>\n            </div>}\n        </section>\n    )\n}\n\nexport default BurgerIngredients\n","import style from \"../burger-constructor/BurgerConstructor.module.css\";\nimport {ConstructorElement, DragIcon} from '@ya.praktikum/react-developer-burger-ui-components'\nimport {cartPropTypes} from \"../../utils/propTypesTemplates\";\nimport PropTypes from \"prop-types\";\nimport {useEffect, useRef} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {DECREASE_INGREDIENT_COUNT, DELETE_INGREDIENT, TOTAL_PRICE} from \"../../services/actions/burger-ingredients\";\nimport {useDrag, useDrop} from \"react-dnd\";\n\nconst ConstructorListElement = ({type, name, price, image, uuid, _id, index, moveCardHandler}) => {\n    const burgerConstructorIngredientsLength = useSelector(store => store.ingredientReducer.constructorIngredients.filter(item => item.type !== 'bun').length)\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n            dispatch({\n                type: TOTAL_PRICE,\n            })\n        }, [dispatch, uuid]\n    )\n\n    const deleteIngredient = () => {\n        dispatch({\n            type: DELETE_INGREDIENT,\n            uuid: uuid\n        })\n        dispatch({\n            type: DECREASE_INGREDIENT_COUNT,\n            _id: _id\n        })\n        dispatch({\n            type: TOTAL_PRICE,\n        })\n    }\n\n    const [{isDragging}, dragRef] = useDrag({\n        type: 'constructor-ingredient',\n        item: {index},\n        collect: (monitor) => ({\n            isDragging: monitor.isDragging(),\n        }),\n    })\n\n    const opacity = isDragging ? 0 : 1\n\n    const [, dropRef] = useDrop({\n        accept: 'constructor-ingredient',\n        hover(item, monitor) {\n            if (!ref.current) {\n                return;\n            }\n            const dragIndex = item.index;\n            const hoverIndex = index;\n            if (dragIndex === hoverIndex) {\n                return;\n            }\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n            const clientOffset = monitor.getClientOffset();\n            const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n            if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n                return;\n            }\n            if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n                return;\n            }\n            moveCardHandler(dragIndex, hoverIndex);\n            item.index = hoverIndex;\n        },\n    });\n\n    const ref = useRef(null)\n    dragRef(dropRef(ref));\n\n    return (\n        <div className={style.constructorListContainer} style={{opacity}} ref={ref}>\n            <div className={style.dragIco}>\n                {type === '' && burgerConstructorIngredientsLength > 1 ? <DragIcon type=\"primary\"/> : ''}\n            </div>\n            <ConstructorElement\n                type={type}\n                isLocked={!!type}\n                text={name}\n                price={price}\n                thumbnail={image}\n                handleClose={() => deleteIngredient(uuid)}\n            />\n        </div>\n    )\n}\n\nConstructorListElement.propTypes = {\n    type: PropTypes.string.isRequired,\n    uuid: PropTypes.string.isRequired,\n    index: PropTypes.number,\n    _id: PropTypes.string.isRequired,\n    moveCardHandler: PropTypes.func,\n    cartPropTypes\n}\n\nexport default ConstructorListElement;\n","import {CurrencyIcon} from '@ya.praktikum/react-developer-burger-ui-components'\nimport style from '../card/Card.module.css'\nimport {useSelector} from \"react-redux\";\n\nconst Total = () => {\n    const totalPrice = useSelector(store => store.ingredientReducer.totalPrice)\n    return (\n        <>\n            <p className={`${style.price} ${'text text_type_digits-default mt-1 mb-1'}`}>\n                {totalPrice}\n                <CurrencyIcon type=\"primary\"/>\n            </p>\n        </>\n    )\n}\n\nexport default Total;\n","import React from 'react'\nimport ConstructorListElement from \"../constructor-list-element/constructorListElement\";\nimport container from '../burger-ingredients/BurgerIngredients.module.css'\nimport style from './BurgerConstructor.module.css'\nimport scroller from '../../pages/constructor-page/constructorPage.module.css'\nimport {Button} from '@ya.praktikum/react-developer-burger-ui-components'\nimport Total from \"../total/Total\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useDrop} from \"react-dnd\";\nimport {v4 as uuidv4} from 'uuid';\nimport {\n    ADD_INGREDIENT,\n    INCREASE_INGREDIENT_COUNT,\n    MOVE_INGREDIENT,\n    RESET_INGREDIENT_COUNT\n} from \"../../services/actions/burger-ingredients\";\nimport {getCookie} from \"../../utils/cookie\";\nimport {refreshToken} from \"../../services/actions/auth\";\nimport {useHistory} from \"react-router-dom\";\nimport {setOrder} from \"../../services/actions/burger-constructor-ingredients\";\n\nconst BurgerConstructor = () => {\n    const data = useSelector(store => store.ingredientReducer.constructorIngredients);\n    const bun = data.filter(item => item.type === 'bun')\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const makeOrder = () => {\n        if (bun.length > 0 && data.filter(item => item.type !== 'bun').length > 0) {\n            dispatch(setOrder({\n                ingredients: data.map((item) => {\n                    return item._id\n                })\n            }))\n            dispatch({\n                type: RESET_INGREDIENT_COUNT\n            })\n        } else {\n            console.log(\"Неверный состав заказа\")\n            alert(\"Неверный состав заказа. Пожалуйста, выберите булку и хотя бы один ингредиент\")\n        }\n    }\n\n    const submitOrderOnClickHandler =\n        async () => {\n            if (!getCookie(\"accessToken\")) {\n                console.log(\"!accessToken\")\n                await dispatch(refreshToken(localStorage.getItem(\"refreshToken\")))\n                    .then(() => {\n                        console.log(\"!accessToken makeOrder\")\n                        makeOrder()\n                    })\n                    .catch(() => {\n                        history.replace(\"/login\")\n                    })\n        } else {\n                console.log(\"accessToken\")\n                makeOrder()\n        }\n\n    }\n\n    const [, dropTarget] = useDrop({\n        accept: \"ingredient\",\n        drop({props}) {\n            dispatch({\n                type: ADD_INGREDIENT,\n                payload: {...props, uuid: uuidv4()}\n            })\n            dispatch({\n                type: INCREASE_INGREDIENT_COUNT,\n                ingredient: props\n            })\n        },\n    });\n\n    const moveCardHandler = (dragIndex, hoverIndex) => {\n        const dragItem = data[dragIndex]\n\n        if (dragItem) {\n            dispatch({\n                type: MOVE_INGREDIENT,\n                hoverIndex: hoverIndex,\n                dragIndex: dragIndex\n            })\n        }\n    }\n\n    return (\n        <section className={container.container} ref={dropTarget}>\n            <ul className={style.cardsContainer}>\n                {data.length !== 0 ?\n                    <div className={style.cardsScrollerContainer}>\n                        {bun.length !== 0 ? <ConstructorListElement\n                            {...bun[0]}\n                            type={'top'}\n                            name={`${bun[0]?.name} (верх)`}\n                        /> : ''}\n                        <div className={`${scroller.scrollerConstructor} ${style.cardsScroller}`}>\n                            {data.filter(item => item.type !== 'bun').map((item, index) => {\n                                return (<ConstructorListElement\n                                        key={item.uuid}\n                                        {...item}\n                                        type={''}\n                                        index={index}\n                                        moveCardHandler={moveCardHandler}\n                                    />\n                                )\n                            })}\n                        </div>\n                        {bun.length !== 0 ? <ConstructorListElement\n                            {...bun[0]}\n                            type={'bottom'}\n                            name={`${bun[0]?.name} (низ)`}\n                        /> : ''}\n                    </div> :\n                    ''}\n            </ul>\n\n            <div className={style.totalContainer}>\n                <Total/>\n                <div onClick={submitOrderOnClickHandler}>\n                    <Button type=\"primary\" size=\"large\">\n                        Оформить заказ\n                    </Button>\n                </div>\n            </div>\n        </section>\n    )\n}\n\nexport default BurgerConstructor;\n","import React from 'react'\nimport modalsStyles from './ModalOverlay.module.css'\nimport PropTypes from \"prop-types\";\n\nconst ModalOverlay = ({handleClose}) => {\n    return (\n        <div className={modalsStyles.modalOverlay} onClick={handleClose}/>\n    );\n};\n\nModalOverlay.propTypes = {\n    handleClose: PropTypes.func.isRequired\n}\n\nexport default ModalOverlay;\n","import React, {useEffect} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ModalOverlay from \"../modal-overlay/ModalOverlay\";\nimport modalStyles from './Modal.module.css'\nimport {CloseIcon} from '@ya.praktikum/react-developer-burger-ui-components'\nimport PropTypes from \"prop-types\";\n\nconst modalsContainer = document.querySelector('#modals');\n\nconst Modal = ({title, children, handleClose}) => {\n    const closeModals = () => {\n        handleClose()\n    }\n\n    const handleEscKeydown = (e) => {\n        e.key === \"Escape\" && handleClose();\n    };\n\n    useEffect(() => {\n        document.addEventListener('keydown', handleEscKeydown);\n\n        return () => {\n            document.removeEventListener('keydown', handleEscKeydown);\n        };\n        // eslint-disable-next-line\n    }, []);\n\n    return ReactDOM.createPortal(\n        (\n            <>\n                <div className={`${modalStyles.modalsContainer}`}>\n                    <h3 className={'text text_type_main-large ml-10 mt-10'}>{title}</h3>\n                    <div className={modalStyles.closeButton} onClick={closeModals}>\n                        <CloseIcon type=\"primary\"/>\n                    </div>\n                    {children}\n                </div>\n                <ModalOverlay handleClose={closeModals}/>\n            </>\n        ),\n        modalsContainer\n    );\n};\n\nModal.propTypes = {\n    title: PropTypes.string,\n    children: PropTypes.element.isRequired,\n    handleClose: PropTypes.func.isRequired,\n}\n\nexport default Modal;\n","export default __webpack_public_path__ + \"static/media/done.18f2e572.svg\";","import React from 'react'\nimport orderDetailsStyle from './OrderDetails.module.css'\nimport doneImage from '../../images/done.svg'\nimport {useSelector} from \"react-redux\";\n\nconst OrderDetails = () => {\n    const orderNumber = useSelector(store => store.orderDetailsReducer.orderDetails.order.number)\n\n    return (\n        <div className={orderDetailsStyle.orderDetailsContainer}>\n            <p className={`${orderDetailsStyle.orderNumber} ${'text text_type_digits-large mt-30'}`}>{orderNumber}</p>\n            <p className={'text text_type_main-medium mt-8 mb-15'}>идентификатор заказа</p>\n            <img className={orderDetailsStyle.image} src={doneImage} alt={'done'}/>\n            <p className={'text text_type_main-default mt-15'}>Ваш заказ начали готовить</p>\n            <p className={'text text_type_main-default text_color_inactive mt-2 mb-30'}>Дождитесь готовности на\n                орбитальной станции</p>\n        </div>\n    )\n}\n\nexport default OrderDetails;\n","import Modal from \"../../components/modal/Modal\";\nimport React from \"react\";\nimport OrderDetails from \"../../components/order-details/OrderDetails\";\nimport {useSelector} from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nexport function SendOrderModalPage({handleClose}) {\n    const isOrderDetailsModalShown = useSelector(store => store.orderDetailsReducer.orderModalShown)\n    return (\n        <>\n            {isOrderDetailsModalShown &&\n                <Modal title=\"\"\n                       handleClose={() => {\n                           handleClose()\n                       }}\n                >\n                    <OrderDetails/>\n                </Modal>\n            }\n        </>\n    )\n}\n\nSendOrderModalPage.propTypes = {\n    handleClose: PropTypes.func.isRequired,\n}\n","import React from 'react'\nimport {DndProvider} from \"react-dnd\";\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\nimport style from \"./constructorPage.module.css\";\nimport BurgerIngredients from \"../../components/burger-ingredients/BurgerIngredients\";\nimport BurgerConstructor from \"../../components/burger-constructor/BurgerConstructor\";\nimport {SendOrderModalPage} from \"../send-order-modal-page/sendOrderModalPage\";\nimport PropTypes from \"prop-types\";\n\n\nexport function ConstructorPage({handleClose}) {\n\n    return (\n        <div className=\"App\">\n            <SendOrderModalPage handleClose={handleClose}/>\n            <DndProvider backend={HTML5Backend}>\n                <div\n                    className={style.content}>\n                    <BurgerIngredients/>\n                    <BurgerConstructor/>\n                </div>\n            </DndProvider>\n        </div>\n    )\n}\n\nConstructorPage.propTypes = {\n    handleClose: PropTypes.func.isRequired,\n}\n\n","import React from \"react\";\nimport style from \"./form.module.css\";\nimport {Button} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport PropTypes from \"prop-types\";\n\nexport function Form({header, buttonText, handleSubmit, children}) {\n    return (\n        <form className={style.form} onSubmit={handleSubmit}>\n            <h1 className={`text text_type_main-default ${style.text}`}>{header}</h1>\n            <div className={`mt-6 ${style.input}`}>\n                {children}\n            </div>\n            <div className={style.button}>\n                <Button size={\"medium\"}>\n                    {buttonText}\n                </Button>\n            </div>\n        </form>\n    )\n}\n\nForm.propTypes = {\n    header: PropTypes.string.isRequired,\n    buttonText: PropTypes.string.isRequired,\n    handleSubmit: PropTypes.func,\n}\n","import React from \"react\";\n\nexport const useForm = (initialState = {}) => {\n    const [formData, setFormData] = React.useState(initialState);\n\n    const handleInputChange = (e) => {\n        setFormData({...formData, [e.target.name]: e.target.value})\n    }\n\n    return {formData, handleInputChange, setFormData};\n}\n","import React, {useCallback} from 'react'\nimport {Link, useHistory, useLocation} from \"react-router-dom\";\nimport style from \"../../components/form/form.module.css\";\nimport {Form} from \"../../components/form/Form\"\nimport {EmailInput, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {login} from \"../../services/actions/auth\";\nimport {useDispatch} from \"react-redux\";\nimport {setCookie} from \"../../utils/cookie\";\nimport {useForm} from \"../../services/hooks/useForm\";\n\n\nexport function LoginPage() {\n    const dispatch = useDispatch()\n    const history = useHistory()\n    const location = useLocation()\n\n    const {formData, handleInputChange} = useForm({email: \"\", password: \"\"});\n\n    const {email, password} = formData;\n\n    const handleSubmit = useCallback(\n        async (e) => {\n            e.preventDefault()\n            await dispatch(login(email, password))\n                .then((res) => {\n                    setCookie(\"accessToken\", res.accessToken.split('Bearer ')[1])\n                    localStorage.setItem(\"refreshToken\", res.refreshToken)\n                })\n                .then(() => {\n                    history.replace({pathname: location?.state?.from.pathname || '/'})\n                })\n        }, [dispatch, formData, history, location]\n    )\n\n    return (\n        <div className={style.formContainer}>\n            <Form header={\"Вход\"} buttonText={\"Войти\"} handleSubmit={handleSubmit}>\n                <EmailInput\n                    value={email}\n                    name={\"email\"}\n                    onChange={handleInputChange}/>\n                <PasswordInput\n                    value={password}\n                    name={\"password\"}\n                    onChange={handleInputChange}/>\n            </Form>\n            <p className={`text text_type_main-default text_color_inactive mt-20 ${style.text}`}>Вы новый\n                пользователь?\n                <Link\n                    to=\"/register\"\n                    className={`text text_type_main-default ml-2 ${style.link}`}>Зарегистрироваться</Link></p>\n            <p className={`text text_type_main-default text_color_inactive mt-4 ${style.text}`}>Забыли пароль?\n                <Link\n                    to=\"/forgot-password\"\n                    className={`text text_type_main-default ml-2 ${style.link}`}>Восстановить пароль</Link></p>\n        </div>\n    )\n}\n","import React, {useCallback} from 'react'\nimport style from \"../../components/form/form.module.css\";\nimport {Form} from \"../../components/form/Form\";\nimport {EmailInput, Input, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {register} from \"../../services/actions/auth\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useForm} from \"../../services/hooks/useForm\";\n\nexport function RegistrationPage() {\n    const dispatch = useDispatch()\n    const user = useSelector(store => store.authReducer.user)\n    const {formData, handleInputChange} = useForm({email: \"\", password: \"\", name: \"\"});\n    const {email, password, name} = formData;\n\n    const handleSubmit = useCallback(\n        (e) => {\n            e.preventDefault()\n            dispatch(\n                register(email, password, name)\n            )\n        }, [dispatch, formData]\n    )\n\n    if (user.name) {\n        return (\n            <Redirect to={\"/\"}/>\n        )\n    }\n\n    return (\n        <div className={style.formContainer}>\n            <Form header={\"Регистрация\"} buttonText={\"Зарегистрироваться\"} handleSubmit={handleSubmit}>\n                <Input\n                    type={\"text\"}\n                    placeholder={\"Имя\"}\n                    value={name}\n                    name={\"name\"}\n                    onChange={handleInputChange}/>\n                <EmailInput\n                    value={email}\n                    name={\"email\"}\n                    onChange={handleInputChange}/>\n                <PasswordInput\n                    value={password}\n                    name={\"password\"}\n                    onChange={handleInputChange}/>\n            </Form>\n            <p className={`text text_type_main-default text_color_inactive mt-20 ${style.text}`}>Уже зарегистрированы?\n                <Link\n                    to=\"/login\"\n                    className={`text text_type_main-default ml-2 ${style.link}`}>Войти</Link></p>\n\n        </div>\n    )\n}\n","import React, {useCallback} from 'react'\nimport style from \"../../components/form/form.module.css\";\nimport {Form} from \"../../components/form/Form\";\nimport {Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport {resetPassword} from \"../../services/actions/auth\";\nimport {useDispatch} from \"react-redux\";\nimport {useForm} from \"../../services/hooks/useForm\";\n\nexport function ForgotPasswordPage() {\n    const history = useHistory()\n    const dispatch = useDispatch()\n    const {formData, handleInputChange} = useForm({email: \"\"});\n    const {email} = formData;\n\n    const handleClick = useCallback(\n        async (e) => {\n            e.preventDefault()\n            await dispatch(resetPassword(email))\n                .then(() => history.replace(\"/reset-password\"))\n                .then(() => alert(`Письмо с кодом восстановления пароля выслано на электронную почту ${email}`))\n                .catch(error => console.error(error))\n        },\n        [formData, history, dispatch]\n    );\n\n    return (\n        <div className={style.formContainer}>\n            <Form header={\"Восстановление пароля\"} buttonText={\"Восстановить\"} handleSubmit={handleClick}>\n                <Input\n                    type={\"email\"}\n                    placeholder={\"Укажите e-mail\"}\n                    value={email}\n                    name={\"email\"}\n                    onChange={handleInputChange}/>\n            </Form>\n            <p className={`text text_type_main-default text_color_inactive mt-20 ${style.text}`}>Вспомнили пароль?\n                <Link\n                    to=\"/login\"\n                    className={`text text_type_main-default ml-2 ${style.link}`}>Войти</Link></p>\n\n        </div>\n    )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport style from \"../../components/form/form.module.css\";\nimport {Form} from \"../../components/form/Form\";\nimport {Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory} from \"react-router-dom\";\nimport {getCookie} from \"../../utils/cookie\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setNewPassword} from \"../../services/actions/auth\";\nimport {useForm} from \"../../services/hooks/useForm\";\n\nexport function ResetPasswordPage() {\n    const [icon, setIcon] = useState({icon: \"ShowIcon\"})\n    const history = useHistory()\n    const passwordWasSent = useSelector(store => store.authReducer.resetPasswordWasSent)\n    const dispatch = useDispatch()\n\n    const {formData, handleInputChange} = useForm({password: \"\", keyword: \"\"});\n    const {password, keyword} = formData;\n    useEffect(\n        () => {\n            if (!passwordWasSent) {\n                history.replace(\"/forgot-password\")\n            }\n            // eslint-disable-next-line\n        }, []\n    )\n\n    const handleSubmit = useCallback(\n        async (e) => {\n            e.preventDefault()\n            await dispatch(setNewPassword(password, getCookie(\"accessToken\")))\n                .then((response) => {\n                    if (response.success) {\n                        return response\n                    }\n                })\n                .then(() => history.replace(\"/login\"))\n                .then(() => alert(`Пароль успешно изменен. Пожалуйста, войдите заново`))\n                .catch(error => console.error(error))\n        },\n        [formData, history, dispatch]\n    );\n\n    return (\n        <div className={style.formContainer}>\n            <Form header={\"Восстановление пароля\"} buttonText={\"Сохранить\"} handleSubmit={handleSubmit}>\n                <Input\n                    type={\"text\"}\n                    placeholder={\"Введите новый пароль\"}\n                    value={password}\n                    name={\"password\"}\n                    onChange={handleInputChange}\n                    onIconClick={() => {\n                        setIcon({\n                            icon: icon.icon === \"ShowIcon\" ? \"HideIcon\" : \"ShowIcon\"\n                        })\n                    }}\n                    icon={icon.icon}\n                />\n                <Input\n                    type={\"text\"}\n                    placeholder={\"Введите код из письма\"}\n                    value={keyword}\n                    name={\"keyword\"}\n                    onChange={handleInputChange}\n                />\n            </Form>\n            <p className={`text text_type_main-default text_color_inactive mt-20 ${style.text}`}>Вспомнили пароль?\n                <Link\n                    to=\"/login\"\n                    className={`text text_type_main-default ml-2 ${style.link}`}>Войти</Link></p>\n\n        </div>\n    )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport formStyle from \"../../components/form/form.module.css\";\nimport style from \"./profilePage.module.css\"\nimport {Button, Input} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, useHistory, useLocation} from \"react-router-dom\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getProfileInfo, logout, refreshToken, setProfileInfo} from \"../../services/actions/auth\";\nimport {getCookie} from \"../../utils/cookie\";\nimport {useForm} from \"../../services/hooks/useForm\";\n\nexport function ProfilePage() {\n    const {formData, handleInputChange, setFormData} = useForm({name: \"\", email: \"\", password: \"\"});\n    const {name, email, password} = formData;\n    const [isEditButtonsShown, setEditButtonShown] = useState({isButtonsShown: false, inputActive: false})\n    const dispatch = useDispatch()\n    const history = useHistory()\n    const user = useSelector(store => store.authReducer.user)\n    const location = useLocation()\n\n    useEffect(() => {\n            async function checkUser() {\n                await dispatch(refreshToken(localStorage.getItem(\"refreshToken\")))\n                    .then(() => dispatch(getProfileInfo(getCookie(\"accessToken\"))))\n                    .then((res) => {\n                        setFormData({\n                                name: res.user.name,\n                                email: res.user.email,\n                                password: ''\n                            }\n                        )\n                    })\n                    .catch(() => {\n                        history.replace(\"/login\")\n                    })\n            }\n\n            checkUser();\n            // eslint-disable-next-line\n        }, []\n    )\n\n    const toggleButtonsShown = useCallback(() => {\n            setEditButtonShown({\n                isButtonsShown: !isEditButtonsShown.isButtonsShown,\n                inputActive: !isEditButtonsShown.inputActive\n            })\n        }, [isEditButtonsShown]\n    )\n\n    const submitProfileChange = useCallback(\n        async (e) => {\n            e.preventDefault()\n            await dispatch(refreshToken(localStorage.getItem(\"refreshToken\")))\n                .then(() => {\n                    if (name !== user.name) {\n                        dispatch(setProfileInfo(getCookie(\"accessToken\"), {name: name}))\n                    }\n                    if (email !== user.email) {\n                        dispatch(setProfileInfo(getCookie(\"accessToken\"), {email: email}))\n                    }\n                })\n                .catch((err) => {\n                    console.error(err)\n                    history.replace(\"/login\")\n                })\n        }, [formData, dispatch, user, history])\n\n\n    const cancelProfileChange = useCallback(\n        () => {\n            setFormData({\n                name: user.name,\n                email: user.email\n            })\n            toggleButtonsShown()\n        }, [user, toggleButtonsShown])\n\n    const handleLogout = () => {\n        dispatch(logout(localStorage.getItem(\"refreshToken\")))\n            .catch((err) => {\n                console.error(\"Не удалось выполнить выход\", err)\n            })\n        document.cookie = \"accessToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n        localStorage.removeItem('refreshToken');\n    }\n\n    return (\n        <div className={formStyle.formContainer}>\n            <nav className={style.navigation}>\n                <ul className={style.list}>\n                    <li className={style.listElement}>\n                        <Link className={`${location.pathname === '/profile' ? 'text text_type_main-medium'\n                            : 'text text_type_main-medium text_color_inactive'} ${style.link}`}\n                              style={location.pathname === '/profile' ? {color: \"#F2F2F3\"} : {}}\n                              to={\"/profile\"}>Профиль</Link>\n                    </li>\n                    <li className={style.listElement}>\n                        <Link className={`${location.pathname === '/profile/orders' ? 'text text_type_main-medium'\n                            : 'text text_type_main-medium text_color_inactive'} ${style.link}`}\n                              style={location.pathname === '/profile/orders' ? {color: \"#F2F2F3\"} : {}}\n                              to={\"/profile/orders\"}>История заказов</Link>\n                    </li>\n                    <li className={style.listElement}>\n                        <Link to={\"/login\"} className={`text text_type_main-medium text_color_inactive ${style.link}`}\n                              onClick={handleLogout}>Выход</Link>\n                    </li>\n                </ul>\n                <p className={\"text text_type_main-small text_color_inactive mt-20\"}>В этом разделе вы можете\n                    изменить свои персональные данные</p>\n            </nav>\n            {name &&\n                <form className={formStyle.form} onSubmit={submitProfileChange}>\n                    <div className={`mt-6 ${formStyle.input}`}>\n                        <Input\n                            type={\"text\"}\n                            placeholder={\"Имя\"}\n                            value={name}\n                            name={\"name\"}\n                            onChange={handleInputChange}\n                            icon={\"EditIcon\"}\n                            onIconClick={toggleButtonsShown}\n                            disabled={!isEditButtonsShown.inputActive}\n                        />\n                        <Input\n                            type={\"email\"}\n                            placeholder={\"Логин\"}\n                            value={email}\n                            name={\"email\"}\n                            onChange={handleInputChange}\n                            icon={\"EditIcon\"}\n                            onIconClick={toggleButtonsShown}\n                            disabled={!isEditButtonsShown.inputActive}\n                        />\n                        <Input\n                            type={\"text\"}\n                            placeholder={\"Пароль\"}\n                            value={password}\n                            name={\"password\"}\n                            onChange={handleInputChange}\n                            icon={\"EditIcon\"}\n                            onIconClick={toggleButtonsShown}\n                            disabled={!isEditButtonsShown.inputActive}\n                        />\n                    </div>\n                    {isEditButtonsShown.isButtonsShown &&\n                        <div>\n                            <Button onClick={submitProfileChange}>\n                                Сохранить\n                            </Button>\n                            <Button onClick={cancelProfileChange}>\n                                Отмена\n                            </Button>\n                        </div>\n                    }\n                </form>\n            }\n        </div>\n    )\n}\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport style from './notFoundPage.module.css'\nimport linkStyle from \"../../components/form/form.module.css\";\n\nexport const NotFoundPage = () => (\n    <div className={style.notFound}>\n        <h1 className={`text text_type_main-large mt-20 ${linkStyle.text}`}>404 - Not Found!\n            <Link className={`text text_type_main-default ml-2 ${linkStyle.link}`} to=\"/\">Go Home</Link>\n        </h1>\n    </div>\n);\n","import React from \"react\";\nimport header from './../app-header/AppHeader.module.css'\nimport PropTypes from \"prop-types\";\nimport {Link, useRouteMatch} from \"react-router-dom\";\n\nconst HeaderMenuItem = ({icon: Icon, iconStatus, className, path, match, children}) => {\n    const isLinkActive = useRouteMatch(match || path);\n    return (\n        <Link className={header.link} to={`${path}`}>\n            <div className={`${className} ${'m-4'}`}>\n                <Icon type={iconStatus}/>\n                <p className={`${header.headerMenuItemText} text text_type_main-default  ${isLinkActive ? 'text_color_primary'\n                    : 'text_color_inactive'}`}>\n                    {children}\n                </p>\n            </div>\n        </Link>\n    )\n}\n\nHeaderMenuItem.propTypes = {\n    icon: PropTypes.elementType.isRequired,\n    className: PropTypes.string.isRequired,\n    iconStatus: PropTypes.string,\n    path: PropTypes.string.isRequired,\n    match: PropTypes.object,\n}\n\nexport default HeaderMenuItem;\n","import React from 'react'\nimport {BurgerIcon, ListIcon, Logo, ProfileIcon} from '@ya.praktikum/react-developer-burger-ui-components'\nimport HeaderMenuItem from \"../header-menu-item/HeaderMenuItem\";\nimport header from \"./AppHeader.module.css\"\nimport {Link, useRouteMatch} from \"react-router-dom\";\n\n\nconst BurgerMenuIcon = ({type}) => {\n    if (!type) {\n        type = 'secondary'\n    }\n    return (\n        <BurgerIcon type={`${type}`}/>\n    )\n}\n\nconst ListMenuIcon = ({type}) => {\n    if (!type) {\n        type = 'secondary'\n    }\n    return (\n        <ListIcon type={`${type}`}/>\n    )\n}\n\nconst ProfileMenuIcon = ({type}) => {\n    if (!type) {\n        type = 'secondary'\n    }\n    return (\n        <ProfileIcon type={`${type}`}/>\n    )\n}\n\nconst AppHeader = () => {\n    const isConstructorActive = useRouteMatch({\n        path: [\"/\", \"/ingredients/:id\", \"/order\"],\n        exact: true\n    })\n\n    const isListActive = useRouteMatch('/list');\n\n    const isProfileActive = useRouteMatch('/profile');\n\n    return (\n        <header className={header.header}>\n            <div\n                className={header.headerContainer}>\n                <nav className={header.headerMenu}>\n                    <HeaderMenuItem\n                        className={`${header.headerMenuItem} `}\n                        icon={BurgerMenuIcon}\n                        iconStatus={isConstructorActive ? 'primary' : 'secondary'}\n                        match={{\n                            path: [\"/\", \"/ingredients/:id\", \"/order\"],\n                            exact: true\n                        }}\n                        path={\"/\"}\n                    >\n                        Конструктор\n                    </HeaderMenuItem>\n                    <HeaderMenuItem\n                        className={`${header.headerMenuItem} text text_type_main-default text_color_inactive`}\n                        icon={ListMenuIcon}\n                        iconStatus={isListActive ? 'primary' : 'secondary'}\n                        path={\"/list\"}\n                    >\n                        Лента заказов\n                    </HeaderMenuItem>\n                </nav>\n                <Link to={\"/\"} className={`${header.logo} ${'m-6'}`}>\n                    <Logo/>\n                </Link>\n                <HeaderMenuItem\n                    className={`${header.headerMenuItem} text text_type_main-default text_color_inactive`}\n                    icon={ProfileMenuIcon}\n                    iconStatus={isProfileActive ? 'primary' : 'secondary'}\n                    path={\"/profile\"}\n                >\n                    Личный кабинет\n                </HeaderMenuItem>\n            </div>\n        </header>\n    );\n}\n\nexport default AppHeader;\n","import React, {useEffect} from \"react\";\nimport {Redirect, Route, useHistory} from \"react-router-dom\";\nimport {getCookie, setCookie} from \"../utils/cookie\";\nimport {useDispatch} from \"react-redux\";\nimport {refreshToken} from \"../services/actions/auth\";\nimport PropTypes from \"prop-types\";\n\nexport function ProtectedRoute({children, notForAuthorisedRoute, ...rest}) {\n    const dispatch = useDispatch()\n    const accessToken = getCookie(\"accessToken\")\n    const refToken = localStorage.getItem(\"refreshToken\")\n    const history = useHistory()\n\n    useEffect(() => {\n            async function checkToken() {\n                if (!accessToken) {\n                    if (refToken) {\n                        await dispatch(refreshToken(refToken))\n                            .then((res) => {\n                                setCookie(\"accessToken\", res.accessToken.split('Bearer ')[1],)\n                            })\n                            .catch(error => {\n                                console.error(error)\n                                history.replace(\"/login\")\n                            })\n                    }\n                }\n            }\n\n            checkToken()\n            // eslint-disable-next-line\n        }, []\n    )\n\n    if (notForAuthorisedRoute && accessToken) {\n        return <Redirect to=\"/\"/>\n    }\n\n    return (\n        <>\n            <Route\n                {...rest}\n                render={({location}) =>\n                    accessToken || notForAuthorisedRoute ? (\n                        children\n                    ) : (\n                        <Redirect\n                            to={{\n                                pathname: '/login',\n                                state: {from: location}\n                            }}\n                        />\n                    )\n                }\n            />\n\n        </>);\n}\n\n\nProtectedRoute.propTypes = {\n    path: PropTypes.string.isRequired,\n}\n\n\n","import React, {useEffect} from 'react'\nimport ingredientDetailsStyle from './IngredientDetails.module.css'\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {useLocation, useParams} from \"react-router-dom\";\nimport {SET_INGREDIENT_MODAL_CLOSED, SET_INGREDIENT_MODAL_SHOW} from \"../../services/actions/burger-ingredients\";\n\nconst IngredientDetails = () => {\n    const statsTextStyle = 'text text_type_main-default text_color_inactive';\n    const statsDigitsStyle = 'text text_type_digits-default text_color_inactive';\n\n    const {id} = useParams()\n    const dispatch = useDispatch()\n\n    const location = useLocation();\n    const background = location.state?.background;\n\n    useEffect(() => {\n        background && dispatch({\n            type: SET_INGREDIENT_MODAL_SHOW\n        })\n        return () => {\n            background && dispatch({\n                type: SET_INGREDIENT_MODAL_CLOSED\n            })\n        }\n    }, [background, dispatch])\n\n    let ingredient;\n    const ingredients\n        = useSelector(store => store.ingredientReducer.ingredients)\n    if (ingredients.length > 0) {\n        ingredient = ingredients.find(item => item._id === id)\n    }\n\n    return (\n        <>\n            {ingredients.length > 0 &&\n                <div className={ingredientDetailsStyle.ingredientDetailsContainer}>\n                    <img\n                        className={ingredientDetailsStyle.image}\n                        src={ingredient.image_large}\n                        alt={ingredient.name}/>\n                    <p\n                        className={'text text_type_main-medium mt-4 mb-8'}>\n                        {ingredient.name}\n                    </p>\n                    <ul className={ingredientDetailsStyle.stats}>\n                        <li className={ingredientDetailsStyle.stat}>\n                            <p className={statsTextStyle}>\n                                Калории,ккал\n                            </p>\n                            <p className={statsDigitsStyle}>\n                                {ingredient.calories}\n                            </p>\n                        </li>\n                        <li className={ingredientDetailsStyle.stat}>\n                            <p className={statsTextStyle}>\n                                Белки, г\n                            </p>\n                            <p className={statsDigitsStyle}>\n                                {ingredient.proteins}\n                            </p>\n                        </li>\n                        <li className={ingredientDetailsStyle.stat}>\n                            <p className={statsTextStyle}>\n                                Жиры, г\n                            </p>\n                            <p className={statsDigitsStyle}>\n                                {ingredient.fat}\n                            </p>\n                        </li>\n                        <li className={ingredientDetailsStyle.stat}>\n                            <p className={statsTextStyle}>\n                                Углеводы, г\n                            </p>\n                            <p className={statsDigitsStyle}>\n                                {ingredient.carbohydrates}\n                            </p>\n                        </li>\n                    </ul>\n                </div>\n            }\n        </>\n    )\n}\n\nexport default IngredientDetails;\n","import Modal from \"../../components/modal/Modal\";\nimport IngredientDetails from \"../../components/ingredient-details/IngredientDetails\";\nimport React from \"react\";\nimport {useHistory} from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\n\nexport function IngredientModalPage({handleClose}) {\n    const history = useHistory()\n    return (\n        <Modal title=\"Детали ингредиента\"\n               handleClose={() => {\n                   handleClose()\n                   history.goBack()\n               }}\n        >\n            <IngredientDetails/>\n        </Modal>\n    )\n}\n\nIngredientModalPage.propTypes = {\n    handleClose: PropTypes.func.isRequired,\n}\n","import '../../pages/constructor-page/constructorPage.module.css';\nimport {CLOSE_INGREDIENT_MODAL, getIngredients} from \"../../services/actions/burger-ingredients\";\nimport {useDispatch} from \"react-redux\";\nimport {CLOSE_ORDER_MODAL} from \"../../services/actions/burger-constructor-ingredients\";\nimport {Route, Switch, useLocation} from \"react-router-dom\";\nimport {ConstructorPage} from \"../../pages/constructor-page/constructorPage\";\nimport {LoginPage} from \"../../pages/login-page/loginPage\";\nimport {RegistrationPage} from \"../../pages/registration-page/registrationPage\";\nimport {ForgotPasswordPage} from \"../../pages/forgot-password-page/forgotPasswordPage\";\nimport {ResetPasswordPage} from \"../../pages/reset-password-page/resetPasswordPage\";\nimport {ProfilePage} from \"../../pages/profile-page/profilePage\";\nimport {NotFoundPage} from \"../../pages/not-found-page/notFoundPage\";\nimport AppHeader from \"../app-header/AppHeader\";\nimport {ProtectedRoute} from \"../protected-route\";\nimport {IngredientModalPage} from \"../../pages/ingredient-modal-page/ingredientModalPage\";\nimport React, {useEffect} from \"react\";\nimport IngredientDetails from \"../ingredient-details/IngredientDetails\";\n\nfunction App() {\n    const dispatch = useDispatch();\n    const location = useLocation();\n    const background = location.state?.background;\n\n    const handleClose = () => {\n        dispatch({\n            type: CLOSE_INGREDIENT_MODAL\n        });\n        dispatch({\n            type: CLOSE_ORDER_MODAL\n        });\n    }\n\n    useEffect(() => {\n        dispatch(\n            getIngredients())\n    }, [dispatch]);\n\n    return (\n        <>\n            <AppHeader/>\n            <Switch location={background || location}>\n                <Route path=\"/\" exact>\n                    <ConstructorPage handleClose={handleClose}/>\n                </Route>\n                <ProtectedRoute notForAuthorisedRoute={true} path={\"/login\"}>\n                    <LoginPage/>\n                </ProtectedRoute>\n                <ProtectedRoute notForAuthorisedRoute={true} path={\"/register\"}>\n                    <RegistrationPage/>\n                </ProtectedRoute>\n                <ProtectedRoute notForAuthorisedRoute={true} path={\"/forgot-password\"}>\n                    <ForgotPasswordPage/>\n                </ProtectedRoute>\n                <ProtectedRoute notForAuthorisedRoute={true} path={\"/reset-password\"}>\n                    <ResetPasswordPage/>\n                </ProtectedRoute>\n                <ProtectedRoute path={\"/profile\"}>\n                    <ProfilePage/>\n                </ProtectedRoute>\n                <Route path={\"/ingredients/:id\"}>\n                    <IngredientDetails/>\n                </Route>\n                <Route path=\"*\">\n                    <NotFoundPage/>\n                </Route>\n            </Switch>\n            {background &&\n                <Route path={\"/ingredients/:id\"}>\n                    <IngredientModalPage handleClose={handleClose}/>\n                </Route>}\n        </>\n    );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport {Provider} from \"react-redux\";\nimport {applyMiddleware, compose, createStore} from \"redux\";\nimport {rootReducer} from './services/reducers';\nimport thunk from 'redux-thunk';\nimport App from \"./components/app/App\";\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\nconst composeEnhancers =\n    typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n        ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n        : compose;\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\n\nconst store = createStore(rootReducer, enhancer);\n\nReactDOM.render(\n    <Provider store={store}>\n        <Router>\n            <App/>\n        </Router>\n    </Provider>\n    , document.querySelector(\"#root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppHeader_header__3QhD7\",\"headerContainer\":\"AppHeader_headerContainer__1-3rR\",\"headerMenu\":\"AppHeader_headerMenu__3WYGW AppHeader_headerContainer__1-3rR\",\"headerMenuItem\":\"AppHeader_headerMenuItem__3Sfju AppHeader_headerContainer__1-3rR\",\"headerMenuItemText\":\"AppHeader_headerMenuItemText__2VO3I\",\"headerIcon\":\"AppHeader_headerIcon__K_Ehx\",\"logo\":\"AppHeader_logo__2tmYl\",\"link\":\"AppHeader_link__3AyVp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"profilePage_list__3fdCG\",\"listElement\":\"profilePage_listElement__iu9RQ\",\"link\":\"profilePage_link__3tXWV\",\"navigation\":\"profilePage_navigation__3JAP8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardsContainer\":\"BurgerConstructor_cardsContainer__3FFRv\",\"dragIco\":\"BurgerConstructor_dragIco__Aq4tj\",\"totalContainer\":\"BurgerConstructor_totalContainer__M4Jm4\",\"cardsScrollerContainer\":\"BurgerConstructor_cardsScrollerContainer__3ArvY\",\"cardsScroller\":\"BurgerConstructor_cardsScroller__10zev\",\"constructorListContainer\":\"BurgerConstructor_constructorListContainer__lj3in\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientDetailsContainer\":\"IngredientDetails_ingredientDetailsContainer__3KozA\",\"image\":\"IngredientDetails_image__grQEo\",\"stats\":\"IngredientDetails_stats__1aBgx\",\"stat\":\"IngredientDetails_stat__2hClO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"constructorPage_content__3I22n\",\"scroller\":\"constructorPage_scroller__2uZAc\",\"scrollerConstructor\":\"constructorPage_scrollerConstructor__2Tvua constructorPage_scroller__2uZAc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BurgerIngredients_container__2wjGa\",\"cardsContainer\":\"BurgerIngredients_cardsContainer__2d-vT\",\"tab\":\"BurgerIngredients_tab__3wNDO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dragIco\":\"Card_dragIco__2hoFW\",\"price\":\"Card_price__2PNoM\",\"name\":\"Card_name__2xnLG\",\"link\":\"Card_link__1cwr_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderDetailsContainer\":\"OrderDetails_orderDetailsContainer__YJ6qf\",\"image\":\"OrderDetails_image__31kgB\",\"orderNumber\":\"OrderDetails_orderNumber__3EsAM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalsContainer\":\"Modal_modalsContainer__1f5qD\",\"closeButton\":\"Modal_closeButton__1kA_W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__1Ljzh\",\"input\":\"form_input__kPN_j\",\"button\":\"form_button__2H-c6\",\"formContainer\":\"form_formContainer__1hQRJ\",\"link\":\"form_link__2gzSK\",\"text\":\"form_text__BR57h\"};"],"sourceRoot":""}